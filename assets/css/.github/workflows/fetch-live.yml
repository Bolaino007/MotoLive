name: Actualizar tiempos de MotoLive

on:
  schedule:
    - cron: '*/5 * * * *' # Se ejecuta cada 5 minutos
  workflow_dispatch:       # Permite ejecutarlo manualmente desde Actions

jobs:
  fetch-times:
    runs-on: ubuntu-latest

    permissions:
      contents: write       # üî• Permite subir commits

    steps:
      - name: Descargar el repositorio
        uses: actions/checkout@v4

      - name: Obtener tiempos simulados
        run: |
          echo "Descargando datos..."
          curl -s https://mocki.io/v1/1e3d9df1-1a25-4c6b-9e77-8b0738c0ce8d > times.json

      - name: Subir cambios
        run: |
          git config --global user.name "MotoLive Bot"
          git config --global user.email "bot@motolive.com"
          git add times.json
          git commit -m "Actualizaci√≥n autom√°tica de tiempos" || echo "Sin cambios"
          git push
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}  # üîê Token de acceso
